# This configuration file is used by the file broadcasting infrastructure in .github/workflows/sync-files-to-repos.yml.
# It defines the files to be copied to the repositories listed in the `repos` field.
# You can use templating and fairly intricate logic to define the files to be copied and replaced.
# Read more here: https://github.com/BetaHuhn/repo-file-sync-action/
group:
##################
# Anemoi Files   #
##################

# Common Anemoi files
- files:
  - source: sync-files/general/python/
    dest: ./
    template:
      year: 2024-2025
      authors: Anemoi Contributors
  repos: |
    ecmwf/anemoi-core
    ecmwf/anemoi-datasets
    ecmwf/anemoi-inference
    ecmwf/anemoi-registry
    ecmwf/anemoi-transform
    ecmwf/anemoi-utils

# Init specific files once
- files:
  - source: sync-files/anemoi/.release-please-manifest.json
    dest: ./.release-please-manifest.json
    replace: false
  repos: |
    ecmwf/anemoi-datasets
    ecmwf/anemoi-inference
    ecmwf/anemoi-registry
    ecmwf/anemoi-transform
    ecmwf/anemoi-utils


# Anemoi Datasets specific
- files:
  - source: sync-files/anemoi/all/
    dest: ./
    template:
      repo_name: anemoi-datasets
      year: 2024-2025
      authors: Anemoi Contributors
      short_desc: "Datasets for training data-driven weather forecasts."
    # exclude: |
    #   .release-please-manifest.json
    #   .github/PULL_REQUEST_TEMPLATE/pull_request_template-core.md
  - source: sync-files/anemoi/some/.github/workflows/downstream-ci-hpc.yml
    dest: .github/workflows/downstream-ci-hpc.yml
    template:
      repo_name: anemoi-datasets
  - source: sync-files/anemoi/some/.github/workflows/push-to-private.yml
    dest: .github/workflows/push-to-private.yml
    template:
      repo_name: anemoi-datasets
  repos: |
    ecmwf/anemoi-datasets

# Anemoi inference specific
- files:
  - source: sync-files/anemoi/all/
    dest: ./
    template:
      repo_name: anemoi-inference
      year: 2024-2025
      authors: Anemoi Contributors
      short_desc: "Inference tools for data-driven weather forecasts."
    # exclude: |
    #   .release-please-manifest.json
    #   .github/PULL_REQUEST_TEMPLATE/pull_request_template-core.md
    #   .github/workflows/push-to-private.yml
  - source: sync-files/anemoi/some/.github/workflows/downstream-ci-hpc.yml
    dest: .github/workflows/downstream-ci-hpc.yml
    template:
      repo_name: anemoi-inference
  repos: |
    ecmwf/anemoi-inference


# Anemoi registry specific
- files:
  - source: sync-files/anemoi/all/
    dest: ./
    template:
      repo_name: anemoi-registry
      year: 2024-2025
      authors: Anemoi Contributors
      short_desc: "Registry for data-driven weather forecasts."
    # exclude: |
    #   .release-please-manifest.json
    #   .github/PULL_REQUEST_TEMPLATE/pull_request_template-core.md
    #   .github/workflows/push-to-private.yml
    #   .github/workflows/downstream-ci-hpc.yml
  repos: |
    ecmwf/anemoi-registry


# Anemoi transform specific
- files:
  - source: sync-files/anemoi/all/
    dest: ./
    template:
      repo_name: anemoi-transform
      year: 2024-2025
      authors: Anemoi Contributors
      short_desc: "Miscellanous data transformation functions for training data-driven weather forecasts."
    # exclude: |
    #   .release-please-manifest.json
    #   .github/PULL_REQUEST_TEMPLATE/pull_request_template-core.md
    #   .github/workflows/push-to-private.yml
  - source: sync-files/anemoi/some/.github/workflows/downstream-ci-hpc.yml
    dest: .github/workflows/downstream-ci-hpc.yml
    template:
      repo_name: anemoi-transform
  repos: |
    ecmwf/anemoi-transform


# Anemoi utils specific
- files:
  - source: sync-files/anemoi/all/
    dest: ./
    template:
      repo_name: anemoi-utils
      year: 2024-2025
      authors: Anemoi Contributors
      short_desc: "Miscellanous tools for training data-driven weather forecasts."
    # exclude: |
    #   .release-please-manifest.json
    #   .github/PULL_REQUEST_TEMPLATE/pull_request_template-core.md
    #   .github/workflows/push-to-private.yml
  - source: sync-files/anemoi/some/.github/workflows/downstream-ci-hpc.yml
    dest: .github/workflows/downstream-ci-hpc.yml
    template:
      repo_name: anemoi-utils
  repos: |
    ecmwf/anemoi-utils


# Anemoi Core specific
- files:
  - source: sync-files/general/python/LICENSE
    dest: graphs/LICENSE
    template:
      year: 2024-2025
      authors: Anemoi Contributors
    exclude:
      - .github
  - source: sync-files/general/python/LICENSE
    dest: models/LICENSE
    template:
      year: 2024-2025
      authors: Anemoi Contributors
    exclude:
      - .github
  - source: sync-files/general/python/LICENSE
    dest: training/LICENSE
    template:
      year: 2024-2025
      authors: Anemoi Contributors
    exclude:
      - .github
  - source: sync-files/anemoi/CONTRIBUTORS.md
    dest: CONTRIBUTORS.md
    template:
      repo_name: anemoi-core
  - source: sync-files/anemoi/CONTRIBUTORS.md
    dest: graphs/CONTRIBUTORS.md
    template:
      repo_name: anemoi-graphs
  - source: sync-files/anemoi/CONTRIBUTORS.md
    dest: models/CONTRIBUTORS.md
    template:
      repo_name: anemoi-models
  - source: sync-files/anemoi/CONTRIBUTORS.md
    dest: training/CONTRIBUTORS.md
    template:
      repo_name: anemoi-training
  - source: sync-files/anemoi/.github/PULL_REQUEST_TEMPLATE/pull_request_template-core.md
    dest: .github/PULL_REQUEST_TEMPLATE/pull_request_template.md
    template: true
  - source: sync-files/anemoi/.gitignore
    dest: .gitignore
  - source: sync-files/general/python/.github/dependabot.yml
    dest: .github/dependabot.yml
  - source: sync-files/anemoi/.github/workflows/pr-label-public.yml
    dest: .github/workflows/pr-label-public.yml
    template:
      repo_name: anemoi-core
  - source: sync-files/anemoi/.github/workflows/pr-label-conventional-commits.yml
    dest: .github/workflows/pr-label-conventional-commits.yml
    template:
      repo_name: anemoi-core
  - source: sync-files/anemoi/.github/workflows/pr-label-file-based.yml
    dest: .github/workflows/pr-label-file-based.yml
    template:
      repo_name: anemoi-core
  - source: sync-files/anemoi/.github/workflows/pr-conventional-commit.yml
    dest: .github/workflows/pr-conventional-commit.yml
    template:
      repo_name: anemoi-core
  repos: |
    ecmwf/anemoi-core
